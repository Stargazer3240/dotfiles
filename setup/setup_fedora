#!/bin/sh
# DNF
sudo dnf install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm -y
sudo dnf groupupdate core -y
sudo dnf upgrade -y
sudo dnf swap ffmpeg-free ffmpeg --allowerasing -y
sudo dnf groupupdate multimedia --setop="install_weak_deps=False" --exclude=PackageKit-gstreamer-plugin -y
sudo dnf groupupdate sound-and-video -y
sudo dnf install neovim python3-neovim lsd bat gnome-tweaks alacritty zsh stow htop util-linux-user steam-devices f36-backgrounds-gnome gnome-shell-extension-no-overview gnome-shell-extension-appindicator -y
sudo dnf remove firefox "libreoffice*" gnome-maps gnome-logs gnome-font-viewer gnome-photos gnome-tour gnome-weather gnome-calendar gnome-characters gnome-clocks gnome-contacts totem cheese simple-scan gnome-abrt rhythmbox gnome-connections -y
sudo rm /usr/share/applications/nvim.desktop /usr/share/applications/htop.desktop
sudo dnf groupinstall "C Development Tools and Libraries" -y
chsh -s /usr/bin/zsh

# Dotfiles
git clone https://github.com/Stargazer3240/dotfiles.git ~/.dotfiles
cd ~/.dotfiles
rm .git -rf
stow git alacritty zsh

# Flatpak
flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo
flatpak install --reinstall flathub $(flatpak list --app-runtime=org.fedoraproject.Platform --columns=application | tail -n +1 )
flatpak remote-delete fedora
flatpak uninstall --unused --delete-data
flatpak install \
	org.mozilla.firefox \
	org.libreoffice.LibreOffice \
	org.gimp.GIMP \
	it.mijorus.gearlever \
	io.gitlab.librewolf-community \
	io.github.celluloid_player.Celluloid \
	io.freetubeapp.FreeTube \
	com.valvesoftware.Steam \
	com.github.tchx84.Flatseal \
	com.github.Eloston.UngoogledChromium \
	com.github.wwmm.easyeffects \
	gg.minion.Minion \

systemctl reboot
